<!DOCTYPE html>
<style>
body {
	background-color: hsl(30,20%, 95%);
}
h1 {
	font-family: sans-serif;
	font-size: 1em;
}
script {
	display: block;
	white-space: pre;
	margin-top: -1em;
}
</style>
<link rel="stylesheet" href="railroad.css">
<script type="module">
	import functions, { Options } from  "./railroad.js";
	Object.assign(window, functions);
	// options usage example
	Options.VS = 15;
	// Options.INTERNAL_ALIGNMENT = 'left';
	// Options.DEBUG = true;
</script>
<body>

<h1>IDENT</h1>
<script type="module" id="domIdent">
ComplexDiagram(
	Choice(0, Skip(), '-'),
	Choice(0, NonTerminal('name-start char'), NonTerminal('escape')),
	ZeroOrMore(
		Choice(0, NonTerminal('name char'), NonTerminal('escape')))).addTo(domIdent);
</script>

<h1>FUNCTION</h1>
<script type="module" id="domFunction">
Diagram(NonTerminal('IDENT'), '(').addTo(domFunction);
</script>

<h1>AT-KEYWORD</h1>
<script type="module" id="domAtKeyword">
Diagram('@', NonTerminal('IDENT')).addTo(domAtKeyword);
</script>

<h1>HASH</h1>
<script type="module" id="domHash">
Diagram('#', NonTerminal('IDENT')).addTo(domHash);
</script>

<h1>STRING</h1>
<script type="module" id="domString">
Diagram(
	Choice(0,
		Sequence(
			'"',
			ZeroOrMore(
				Choice(0,
					NonTerminal('not " or \\'),
					NonTerminal('escape'))),
			'"'),
		Sequence(
			"'",
			ZeroOrMore(
				Choice(0,
					NonTerminal("not ' or \\"),
					NonTerminal('escape'))),
			"'"))).addTo(domString);
</script>

<h1>URL</h1>
<script type="module" id="domUrl">
Diagram(
	Choice(0, 'u', 'U'),
	Choice(0, 'r', 'R'),
	Choice(0, 'l', 'L'),
	'(',
	Choice(1,
		Optional(NonTerminal('WS')),
		Sequence(
			Optional(NonTerminal('WS')),
			NonTerminal('STRING', '#string'),
			Optional(NonTerminal('WS'))),
		Sequence(
			Optional(NonTerminal('WS')),
			OneOrMore(
				Choice(0,
					NonTerminal('not " \' ( ) WS or NPC'),
					NonTerminal('escape'))),
			Optional(NonTerminal('WS')))),
	')').addTo(domUrl);
</script>

<h1 >NUMBER</h1>
<script type="module" id="domNumber">
Diagram(
	Choice(1, '+', Skip(), '-'),
	Choice(0,
		Sequence(
			OneOrMore(NonTerminal('digit')),
			'.',
			OneOrMore(NonTerminal('digit'))),
		OneOrMore(NonTerminal('digit')),
		Sequence(
			'.',
			OneOrMore(NonTerminal('digit')))),
	Choice(0,
		Skip(),
		Sequence(
			Choice(0, 'e', 'E'),
			Choice(1, '+', Skip(), '-'),
			OneOrMore(NonTerminal('digit'))))).addTo(domNumber);
</script>

<h1>DIMENSION</h1>
<script type="module" id="domDimension">
Diagram(NonTerminal('NUMBER', '#number'), NonTerminal('IDENT')).addTo(domDimension);
</script>

<h1>PERCENTAGE</h1>
<script type="module" id="domPercentage">
Diagram(NonTerminal('NUMBER', '#number'), '%').addTo(domPercentage);
</script>

<h1>UNICODE-RANGE</h1>
<script type="module" id="domUnicodeRange">
Diagram(
	Choice(0,
		'U',
		'u'),
	'+',
	Choice(0,
		Sequence(OneOrMore(NonTerminal('hex digit'), Comment('1-6 times'))),
		Sequence(
			ZeroOrMore(NonTerminal('hex digit'), Comment('1-5 times')),
			OneOrMore('?', Comment('1 to (6 - digits) times'))),
		Sequence(
			OneOrMore(NonTerminal('hex digit'), Comment('1-6 times')),
			'-',
			OneOrMore(NonTerminal('hex digit'), Comment('1-6 times'))))).addTo(domUnicodeRange);
</script>

<h1>COMMENT</h1>
<script type="module" id="domComment">
Diagram(
	'/*',
	ZeroOrMore(
		NonTerminal("anything but * followed by /")),
	'*/').addTo(domComment);
</script>

<h1>CDO</h1>
<script type="module" id="domCdo">
Diagram("<" + "!--").addTo(domCdo);
</script>

<h1>CDC</h1>
<script type="module"  id="domCdc">
Diagram("-->").addTo(domCdc);
</script>

<h1>SQL</h1>
<script type="module" id='domSql'>
Diagram(
	Stack(
		Sequence(
			'SELECT',
			Optional('DISTINCT', 'skip'),
			Choice(0,
				'*',
				OneOrMore(
					Sequence(NonTerminal('expression'), Optional(Sequence('AS', NonTerminal('output_name')))),
					','
				)
			),
			'FROM',
			OneOrMore(NonTerminal('from_item'), ','),
			Optional(Sequence('WHERE', NonTerminal('condition')))
		),
		Sequence(
			Optional(Sequence('GROUP BY', NonTerminal('expression'))),
			Optional(Sequence('HAVING', NonTerminal('condition'))),
			Optional(Sequence(
				Choice(0, 'UNION', 'INTERSECT', 'EXCEPT'),
				Optional('ALL'),
				NonTerminal('select')
			))
		),
		Sequence(
			Optional(Sequence(
				'ORDER BY',
				OneOrMore(Sequence(NonTerminal('expression'), Choice(0, Skip(), 'ASC', 'DESC')), ','))
			),
			Optional(Sequence(
				'LIMIT',
				Choice(0, NonTerminal('count'), 'ALL')
			)),
			Optional(Sequence('OFFSET', NonTerminal('start'), Optional('ROWS')))
		)
	)
).addTo(domSql);
</script>

<h1>image() function</h1>
<xmp>
image() = image( <image-tags>? [ <image-src>? , <color>? ]! )
<image-tags> = [ ltr | rtl ]
<image-src> = [ <url> | <string> ]</xmp>
<script type="module" id="domImageFunction">
Diagram(
	Optional(
		Sequence(
			Choice(0, "ltr", "rtl")
		)
	),
	OptionalSequence(
		Choice(0, NonTerminal("<url>"), NonTerminal("<string>")),
		NonTerminal("<color>")
	)
).addTo(domImageFunction);
</script>

<h1 id='glob'>glob pattern</h1>
Alternating alphanums and <code>*</code> chars
<script type="module" id="domGlob">
Diagram(
	AlternatingSequence(
		OneOrMore(NonTerminal("alphanumeric")),
		"*"
	)
).addTo(domGlob);
</script>

<h1>CSS grid-auto-flow property</h1>
<script type="module" id="domGridAutoFlow">
Diagram(
	MultipleChoice(0, "any",
		Choice(1, "row", "column"),
		"dense"
	)
).addTo(domGridAutoFlow);
</script>
